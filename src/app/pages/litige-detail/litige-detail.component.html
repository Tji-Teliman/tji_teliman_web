<div class="mission-page">
  <div class="sidebar">
    <button class="back-button" (click)="goBack()">
      <i class="fas fa-arrow-left"></i> 
    </button>
  </div>

  <div class="mission-detail-container" *ngIf="litige">
    <div class="header-band">
      <div class="header-title">
        Détails du Litige N° {{ litige.numero }}
      </div>
    </div>

    <div class="content-area">

      <div class="litige-layout-container">

        <div class="main-detail-card">
          <mat-card class="litige-data-card">
            
            <div class="card-header">
              <h3>Litige concernant la mission "{{ litige.objet }}"</h3>
              <span class="status-badge" [ngClass]="{'pending': litige.statut === 'En attente'}">
                {{ litige.statut }}
              </span>
            </div>
            
            <p class="description">{{ litige.description }}</p>

            <div class="litige-details-grid">
              <div class="detail-item">
                <span class="label">Montant du litige</span>
                <span class="value amount">{{ litige.montant }}</span>
              </div>
              <div class="detail-item">
                <span class="label">Date de création</span>
                <span class="value">{{ litige.dateCreation }}</span>
              </div>
              <div class="detail-item">
                <span class="label">Dernière mise à jour</span>
                <span class="value">{{ litige.derniereMiseAJour }}</span>
              </div>
              <div class="detail-item">
                <span class="label">Résolution prévue</span>
                <span class="value">{{ litige.resolutionPrevued }}</span>
              </div>
            </div>
            
            <div class="card-actions">
              <button mat-button class="btn-fermer" (click)="fermerLitige()">Fermer litige</button>
              <button mat-flat-button color="primary" class="btn-resoudre" (click)="resoudreLitige()">Résoudre le litige</button>
            </div>
          </mat-card>
        </div>


        <div class="side-panel-cards">
          
          <mat-card class="party-card">
            <h2 class="party-title">Jeune</h2>
            <div class="party-info">
              <img [src]="litige.jeune.avatarUrl" alt="Avatar Jeune" class="avatar-circle">
              <div>
                <span class="party-name">{{ litige.jeune.nom }}</span>
                <span class="party-email">{{ litige.jeune.email }}</span>
              </div>
            </div>
          </mat-card>

          <mat-card class="party-card">
            <h2 class="party-title">Recruteur</h2>
            <div class="party-info">
              <img [src]="litige.recruteur.avatarUrl" alt="Avatar Recruteur" class="avatar-circle">
              <div>
                <span class="party-name">{{ litige.recruteur.nom }}</span>
                <span class="party-email">{{ litige.recruteur.email }}</span>
              </div>
            </div>
          </mat-card>

          <mat-card class="mission-associee-card">
            <h2 class="mission-associee-title">Mission Associée</h2>
            <div class="mission-associee-content">
              <i class="fas fa-briefcase mission-icon"></i> 
              <div> 
                <span class="mission-number">Mission {{ litige.missionAssociee.numero }}</span>
                <span class="mission-name">{{ litige.missionAssociee.titre }}</span>
              </div>
            </div>
          </mat-card>
          
        </div> </div> </div> </div> <div *ngIf="!litige" class="loading-message">
    Chargement des détails du litige...
  </div>
</div> <app-modal
  #actionConfirmationModal
  type="confirmation"
  [message]="confirmationMessage"
  confirmText="Confirmer l'action"
  cancelText="Annuler"
  (confirmed)="confirmAction()"
  (dismissed)="pendingAction = null"
></app-modal>

<app-modal
  #successModal
  type="success"
  message="" 
  [width]="350"
></app-modal>